<div  ng-controller="infoPanelCtrl">
    <div>        
        <div>
            <div id="map" class="mini-map">
                <ui-gmap-google-map  center='map.center' zoom='map.zoom' options="map.options" events="map.events" control="map.control">
                </ui-gmap-google-map>
            </div>
            <hr>            
            <div class="row">
                <div ng-if="infoPanelCsw.name != undefined" class="col-xs-12"><h4>Abstract</h4>{{infoPanelCsw.name}}</div>
                <div ng-if="infoPanelCsw.description != undefined && infoPanelCsw.description != ''" class="col-xs-12"><h4>Summary</h4>{{infoPanelCsw.description}}</div>
                <div ng-if="infoPanelCsw.iconUrl != undefined" class="col-xs-12">
                    <h4>Icon</h4>
                    <img ng-src="{{infoPanelCsw.iconUrl}}" height="16" width="16">
                </div>
                <div ng-if="infoPanelCsw.cswRecords.length > 0" class="col-xs-12"><h4>Details</h4>
                    <small>
                        <div ng-controller="collapseInfoPanelCtrl">
                            <div ng-repeat="cswRecord in infoPanelCsw.cswRecords.slice(0,10)"> <!-- NB: only display 10 1st 10 items -->
                                <button type="button" class="btn btn-xs btn-block btn-default" ng-click="isCollapsed = !isCollapsed; isCollapsed ? lowlightOnPreviewMap(infoPanelCsw.name, cswRecord.adminArea) : highlightOnPreviewMap(infoPanelCsw.name, cswRecord.adminArea)" ng-mouseenter="isCollapsed && highlightOnPreviewMap(infoPanelCsw.name, cswRecord.adminArea)" ng-mouseleave="isCollapsed && lowlightOnPreviewMap(infoPanelCsw.name, cswRecord.adminArea)">
                                    {{cswRecord.adminArea!="" && cswRecord.adminArea!=null ? cswRecord.adminArea : "More Information" }}
                                </button>
                                <div uib-collapse="isCollapsed">
                                    <div class="col-xs-12"><strong>Contact Org:</strong> {{cswRecord.contactOrg}}</div>
                                    <div class="col-xs-12"><strong>Description:</strong> {{cswRecord.description}}</div>
                                    <div class="col-xs-12"><strong>Name:</strong> {{cswRecord.name}}</div>
                                    <div class="col-xs-12"><strong>Info URL:</strong> {{cswRecord.recordInfoUrl}}</div>
                                    <div ng-repeat="onlineResource in cswRecord.onlineResources">
                                        <div ng-if="onlineResource.type != 'Unsupported'">
                                            <div class="col-xs-12"><strong>{{onlineResource.type}}:</strong> {{onlineResource.url}}</div>
                                        </div>
                                    </div>
                                    <div ng-if="wmsUrls[cswRecord.adminArea]!=undefined">
                                        <strong>WMS Preview:</strong>
                                        <img ng-src="{{wmsUrls[cswRecord.adminArea]}}" height="100" width="100" alt="Loading preview...">
                                    </div>
                                    <div ng-if="wmsLegends[cswRecord.adminArea]!=undefined">
                                        <strong>Legend:</strong>
                                        <img ng-src="{{wmsLegends[cswRecord.adminArea]}}" alt="Loading legend...">
                                    </div>
                                    <hr>
                                    <button type="button" class="btn btn-info btn-sm" ng-click="addCSWRecord(infoPanelCsw,cswRecord)">Add</button>
                                </div>                                
                            </div>
                        </div>
                    </small>
                </div>
                
            </div>                
        </div>                
    </div>
</div>

