Rickshaw.namespace("Rickshaw.Graph.SmootherPlus");Rickshaw.Graph.SmootherPlus=Rickshaw.Class.create({initialize:function(a){this.graph=a.graph;this.element=a.element;this.aggregationScale=1;this.build();this.graph.stackData.hooks.data.push({name:"smoother",orderPosition:50,f:this.transformer.bind(this)})},build:function(){var a=this;var b=jQuery;if(this.element){b(function(){b(a.element).slider({min:1,max:100,slide:function(c,d){a.setScale(d.value)},create:function(c,d){a.setSliderTicks(c.target)}})})}},setSliderTicks:function(d){var e=jQuery;var f=e(d);var a=100;var c=0;var g=100/(a-c);e(self.element).find(".rickshaw_smoother_tick_mark").remove();e(self.element).find(".rickshaw_smoother_tick_num").remove();for(var b=0;b<=a-c;b+=10){e('<span class="rickshaw_smoother_tick_mark"></span>').css("left",(g*b)+"%").appendTo(f);e('<span class="rickshaw_smoother_tick_num">'+b+"</span>").css("left",(g*b-3)+"%").appendTo(f)}e('<span class="rickshaw_smoother_tick_num">m</span>').css("left",(g*106)+"%").appendTo(f)},setScale:function(a){if(a<1){throw"scale out of range: "+a}this.aggregationScale=a;this.graph.update()},transformer:function(b){if(this.aggregationScale==1){return b}var a=[];b.forEach(function(f){var c=[];while(f.length){var e=0,d=0;var g=f.splice(0,this.aggregationScale);g.forEach(function(h){e+=h.x/g.length;d+=h.y/g.length});c.push({x:e,y:d})}a.push(c)}.bind(this));return a}});