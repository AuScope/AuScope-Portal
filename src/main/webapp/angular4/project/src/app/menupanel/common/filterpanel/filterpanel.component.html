<div class="filter-form">
    
    	<div *ngIf="layer.filterCollection">
	        <div  *ngFor="let mandatoryFilter of layer.filterCollection.mandatoryFilters">
	            <div *ngIf="mandatoryFilter.type == 'MANDATORY.CHECKBOX'">
	                <div class="form-group  form-group-sm">
	                	<div class="checkbox">
							<input class="input-sm" id="{{ 'filter-MANDATORY.CHECKBOX-' + mandatoryFilter.label }}" type="checkbox" [(ngModel)]="mandatoryFilter.value"/>
							<label for="{{ 'filter-MANDATORY.CHECKBOX-' + mandatoryFilter.label }}">
								{{mandatoryFilter.label}}
							</label>
						</div>
	                                                       
	                </div>
	            </div> 
	            <div *ngIf="mandatoryFilter.type == 'MANDATORY.DROPDOWNSELECTLIST'">
	                <div class="form-group  form-group-sm">
	                    <label>{{mandatoryFilter.label}}</label>	                    
						<select class="form-control input-sm" [(ngModel)]="mandatoryFilter.value">
							<option value="" selected="selected">-- choose a {{mandatoryFilter.label}} --</option>
							<option *ngFor="let option of mandatoryFilter.options" [ngValue]="getValue(option)">{{getKey(option)}}</option>
						</select>
	                </div>
	            </div>   
	            <div *ngIf="mandatoryFilter.type == 'MANDATORY.TEXTBOX'">
	                <div class="form-group  form-group-sm">
	                    <label>{{mandatoryFilter.label}}</label>	                    
						<input type="text" class="form-control input-sm"  [(ngModel)]="mandatoryFilter.value">
	                </div>
	            </div>                       
	        </div>
	        
        </div>
        
        <div *ngIf="!layer.filterCollection">
	        <div class="alert alert-warning fade in">
                
                <i class="ti-bell f-s-20 pull-left m-r-10"></i>
                <p>There are no filters associated with this layer</p>
            </div>
           
    	</div>
    	
    	<fieldset *ngIf="layer.filterCollection && layer.filterCollection.optionalFilters" class="show-fieldset-borders">
        	<legend><h5>Optional Filters</h5></legend>
        	<div class="form-group  form-group-sm">
	            <label><i class="fa fa-refresh hasEvent red" (click)="refreshFilter()"></i> Select Filter:</label>        			  
                <select class="form-control input-sm" [ngModel]="selectedFilter" (ngModelChange)="addFilter($event)">				
					<option [ngValue]="filt" *ngFor="let filt of layer.filterCollection.optionalFilters">{{filt.label}}</option>
				</select>			   
		    </div>
		    <hr class="nav-divider">
		    
		    <div *ngFor="let optionalFilter of optionalFilters">
	            <div *ngIf="optionalFilter.type=='OPTIONAL.TEXT'">
	                <div class="form-group  form-group-sm">
					    <label>{{optionalFilter.label}}:</label>
					    <input type="text" class="form-control input-sm"  [(ngModel)]="optionalFilter.value">				   
					</div>
	            </div> 
	            <div *ngIf="optionalFilter.type=='OPTIONAL.DATE'">
	                <div class="form-group">
						<label class="control-label">{{optionalFilter.label}}:</label>
						<input type="date" class="form-control input-sm" [(ngModel)]="optionalFilter.value"/>
					</div>
	            </div> 
	            <div *ngIf="optionalFilter.type=='OPTIONAL.DROPDOWNSELECTLIST'">	                
                    <div class="form-group  form-group-sm">
	                    <label>{{optionalFilter.label}}</label>	                    
						<select class="form-control input-sm" [(ngModel)]="optionalFilter.value">
							<option value="" selected="selected">-- choose a {{optionalFilter.label}} --</option>
							<option *ngFor="let option of optionalFilter.options">{{getKey(option)}}</option>
						</select>
	                </div>
	            </div>
	            <div *ngIf="optionalFilter.type=='OPTIONAL.DROPDOWNREMOTE'">	                
	                <div class="form-group  form-group-sm">
	                    <label>{{optionalFilter.label}}</label>	                    
						<select class="form-contro input-sml" [(ngModel)]="optionalFilter.value">
							<option value="" selected="selected">-- choose a {{optionalFilter.label}} --</option>
							<option *ngFor="let option of optionalFilter.options" [ngValue]="option.value">{{option.key}}</option>
						</select>
	                </div>
	            </div>
	            <div *ngIf="optionalFilter.type=='OPTIONAL.PROVIDER'">	               
	                <div class="form-group">						
						<div class="checkbox" *ngFor="let provider of providers;let idx = index">
							<input class="input-sm" id="{{ 'filter-OPTIONAL.PROVIDER-' + idx + '-' + layer.id }}" type="checkbox" [(ngModel)]="optionalFilter.value[provider.value]"/>
							<label for="{{ 'filter-OPTIONAL.PROVIDER-' + idx + '-' + layer.id }}">
								{{provider.label}}
							</label>
						</div>						
					</div>
	            </div>	            
	        </div>
		   
	    </fieldset>
    	<button type="button" class="btn btn-info btn-sm" (click)="addLayer(layer)">Add Layer</button>
</div>