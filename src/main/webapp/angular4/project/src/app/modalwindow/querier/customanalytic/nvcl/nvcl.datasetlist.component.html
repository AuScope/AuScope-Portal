<div class="panel-group" id="nvcl-dataset-accordion">
	<!-- BEGIN panel -->
	<div *ngFor="let nvclDataset of nvclDatasets;let i = index" class="panel panel-default panel-bordered">
		<!-- BEGIN panel-heading -->
		<div class="panel-heading" id="headingOne">
			<h4 class="panel-title">
				<a href="#{{nvclDataset.datasetName}}" class="accordion-link" data-toggle="collapse" data-parent="#nvcl-dataset-accordion">
					DatasetName: {{nvclDataset.datasetName}}
				</a>
			</h4>
		</div>
		<!-- END panel-heading -->
		<!-- BEGIN panel-collapse -->
		<div id="{{nvclDataset.datasetName}}" class="panel-collapse collapse" [ngClass]="{'in':i==0}" >
			<div class="panel panel-default panel-with-tabs">
				<!-- BEGIN panel-heading -->
				<div class="panel-heading">
					<ul id="nvcl-panel-tab" class="nav nav-tabs pull-right">
						<li (click)="nvclDataset.image=true;nvclDataset.scalar=false;nvclDataset.download=false;" [ngClass]="{'active':nvclDataset.image}" ><a href="#{{nvclDataset.datasetName}}-nvcl-panel-tab-image" data-toggle="tab"><i class="fa fa-home"></i> <span class="hidden-xs">Image</span></a></li>
						<li class="desktop-only" (click)="nvclDataset.image=false;nvclDataset.scalar=true;nvclDataset.download=false;" [ngClass]="{'active':nvclDataset.scalar}" ><a href="#{{nvclDataset.datasetName}}-nvcl-panel-tab-scalar" data-toggle="tab"><i class="fa fa-user"></i> <span class="hidden-xs">Scalar</span></a></li>
						<li class="desktop-only" (click)="nvclDataset.image=false;nvclDataset.scalar=false;nvclDataset.download=true;" [ngClass]="{'active':nvclDataset.download}" ><a href="#{{nvclDataset.datasetName}}-nvcl-panel-tab-download" data-toggle="tab"><i class="fa fa-user"></i> <span class="hidden-xs">Download</span></a></li>
					</ul>
					<h4 class="panel-title">NVCL</h4>
				</div>
				<!-- END panel-heading -->
				<!-- BEGIN tab-content -->
				<div id="panel-tab-content" class="tab-content">
					<!-- BEGIN tab-pane -->										
					<div class="tab-pane fade in active" [ngClass]="{'active in':nvclDataset.image}" id="{{nvclDataset.datasetName}}-nvcl-panel-tab-image">		
						<div class="modal-panel-size loading-iframe">											
							<iframe *ngIf="datasetImages[nvclDataset.datasetId]" style="overflow:auto;width:100%;height:100%;" frameborder="0" [src]="datasetImages[nvclDataset.datasetId] | trustResourceUrl"></iframe>
						</div>
					</div>					
					<!-- END tab-pane -->
					<!-- BEGIN tab-pane -->
					<div class="tab-pane fade" [ngClass]="{'active in':nvclDataset.scalar}"
						id="{{nvclDataset.datasetName}}-nvcl-panel-tab-scalar">
						<div class="modal-panel-size">
							<!-- BEGIN mail-box -->
							<div *ngIf="drawGraphMode==false;" style="overflow: auto; width: 100%; height: 100%;">
								<div class="mail-box-content">
									<!-- BEGIN mail-box-toolbar -->
									<div class="mail-box-toolbar">
										<div class="pull-right hidden-xs">
											<div data-toggle="tooltip" title="Download csv" (click)="downloadCSV(nvclDataset.datasetId)" class="btn btn-default btn-sm">
												<i class="ti-download"></i>
											</div>
											<div data-toggle="tooltip" title="Plot analytic Graph" (click)="changeDrawGraphMode(true, nvclDataset.datasetId)" class="btn btn-default btn-sm">
												<i class="ti-bar-chart-alt"></i>
											</div>
											<div data-toggle="tooltip" title="Reset selection" (click)="clearCheckBox(nvclDataset.datasetId)" class="btn btn-default btn-sm">
												<i  class="ti-loop"></i>
											</div>
										</div>
									</div>
									<!-- END mail-box-toolbar -->
									<!-- BEGIN mail-box-container -->
									<div class="mail-box-container">
										<!-- BEGIN scrollbar -->
										<div data-scrollbar="true" data-height="100%">
											<!-- END table-email -->
											<ul class="email-list">
												<li class="" *ngFor="let datasetScalar of datasetScalars[nvclDataset.datasetId]">
													<div class="email-checkbox">
														<div class="checkbox">
															<input type="checkbox" value="10" id="log-checkbox-{{nvclDataset.datasetName}}-{{datasetScalar.logName}}" [(ngModel)]="datasetScalar.value"/> <label for="log-checkbox-{{nvclDataset.datasetName}}-{{datasetScalar.logName}}"></label>
														</div>
													</div>
													<div class="email-message">
														<div>
															<div class="email-sender">
																<span class="email-time"><div class="fake-link" (click)="getDefinition(datasetScalar.logName)">Definition</div></span>
																{{datasetScalar.logName}}
															</div>
															<div class="email-title">LogId: {{datasetScalar.logId}}</div>
															<div class="email-desc" *ngIf="datasetScalarDefinition[datasetScalar.logName]">{{datasetScalarDefinition[datasetScalar.logName].definition}}</div>
														</div>
													</div>
												</li>
											</ul>
											<!-- END table-email -->
										</div>
										<!-- END scrollbar -->
									</div>
									<!-- END mail-box-container -->
								</div>
							</div>

							<div *ngIf="drawGraphMode==true;" class="modal-panel-size">
								<div style="overflow: auto; width: 100%; height: 100%;">
									<div class="hasEvent light-blue" (click)="changeDrawGraphMode(false)" style="position: fixed;z-index: 10;right: 10%;">
									<i class="fa fa-window-close" aria-hidden="true"></i> close</div>
									<div id="rickshawChart_outer">
										<div  *ngFor="let selectedLogName of selectedLogNames[nvclDataset.datasetId]; let j = index">
											<div id="content_{{j}}" [ngClass]="{'loading-iframe': processingGraph}">
												<form id="left_side_panel_{{j}}">
													<h1>{{selectedLogName}}</h1>
													<section>
														<div id="legend_{{j}}" class="rickshaw_legend"></div>
													</section>
													<section>
														<div id="renderer_form_{{j}}" class="toggler">
															<input type="radio" name="renderer" id="area_{{j}}" value="area"> <label for="area_{{j}}">area</label> <input
																type="radio" name="renderer" id="bar_{{j}}" value="bar" checked> <label for="bar_{{j}}">bar</label> <input
																type="radio" name="renderer" id="line_{{j}}" value="line"> <label for="line_{{j}}">line</label> <input
																type="radio" name="renderer" id="scatter_{{j}}" value="scatterplot"> <label for="scatter_{{j}}">scatter</label>
														</div>
													</section>
													<section>
														<div id="offset_form_{{j}}" class="toggler">
															<label for="stack_{{j}}"> <input type="radio" name="offset" id="stack_{{j}}" value="zero" checked=""><span>stack</span></label>  
															<label for="pct_{{j}}"> <input type="radio" name="offset" id="pct_{{j}}" value="expand"> <span>pct</span></label>
															<label for="value_{{j}}"> <input type="radio" name="offset" id="value_{{j}}" value="value"> <span>value</span></label>
														</div>
														<div id="interpolation_form_{{j}}" style="display: none;">
															<label for="cardinal_{{j}}"> <input type="radio" name="interpolation" id="cardinal-{{j}}" value="cardinal"
																checked=""> <span>cardinal</span>
															</label> <label for="linear_{{j}}"> <input type="radio" name="interpolation" id="linear_{{j}}" value="linear">
																<span>linear</span>
															</label> <label for="step_{{j}}"> <input type="radio" name="interpolation" id="step_{{j}}" value="step-after">
																<span>step</span>
															</label>
														</div>
													</section>
													<section>
														<h6>Smoothing</h6>
														<div id="smoother_{{j}}"></div>
													</section>
												</form>
												<div id="chartcontainer_{{j}}">
													<div id="y_axis_{{j}}"></div>
													<div id="chart_{{j}}"></div>
													<div id="x_axis_{{j}}"></div>
												</div>
												<hr>
											</div>
											<hr>
										</div>
										<div id="preview_last"></div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- END tab-pane -->
					<!-- BEGIN tab-pane -->
					<div class="tab-pane fade" [ngClass]="{'active in':nvclDataset.download}" id="{{nvclDataset.datasetName}}-nvcl-panel-tab-download">																										
						<p>download</p>
					</div>
					<!-- BEGIN tab-pane -->
				</div>
				<!-- END tab-content -->
			</div>
		</div>
		<!-- END panel-collapse -->
	</div>
	<!-- END panel -->
</div>